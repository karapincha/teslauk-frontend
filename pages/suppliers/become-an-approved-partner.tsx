import { useEffect, useState } from 'react'
import type { NextPage } from 'next'
import Head from 'next/head'
import { Header, Footer, SupplierRibbon } from '@/components/sections'
import { useRouter } from 'next/router'
import { PageHeaderVariant } from '@/components/molecules/PageHeaderVariant'
import { Button, TextField, Badge } from '@/components/atoms'
import { Pagination, SectionHeading } from '@/components/molecules'
import { ArrowRight, Search } from 'react-feather'
import { SearchSuppliers, SuppliersSearch } from '@/components/molecules'
import { supplierList } from '@/dummy-data/supplier-list'
import { useViewport } from '@/utils'
import parseHTML from 'html-react-parser'
import { useQuery, gql } from '@apollo/client'

import { getSuppliersPage, getStaticPage } from '../../lib/graphql'
import Link from 'next/link'
import { Common as CommonLayout } from '@/components/layouts'

const Page: NextPage = ({ page }: any) => {
  const router = useRouter()

  const { isMobile, isTablet, isDesktop } = useViewport()
  console.log(page)

  return (
    <>
      <Head>
        <title>
          {page.title ? `${page.title} - Tesla Owners UK` : 'Become a partner - Tesla Owners UK'}
        </title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <CommonLayout>
        <div className='container flex pt-[20px] pb-[40px] md:pb-[80px]'>
          <PageHeaderVariant
            heading={page.title}
            image={page?.staticPageHeader?.banner?.mediaItemUrl}
            description={page?.staticPageHeader?.description}
            // commonClassName='lg:w-[30%] !gap-0'
            // descriptionClassName='text-md !pt-[16px] text-center md:text-left'
            // imageClassName='!h-[205px] md:!h-[248px] lg:!h-[407px] w-full'
            // metaData={header?.blockSuppliersHeader?.tagline}
            // metaDataNumber={`${suppliers?.nodes?.length}+`}
            // btnProps={{
            //   label: header?.blockSuppliersHeader?.primaryButtonText,
            //   onClick: (e: any) => {
            //     e.preventDefault()
            //     router.push('#search-block')
            //   },
            //   appearance: 'secondary',
            //   className: 'w-full md:w-[208px]',
            // }}
          />
        </div>

        <div className='container flex pt-[40px] pb-[24px]'>
          <div className='mx-auto flex w-full max-w-[782px] flex-col items-center gap-[40px] text-center'>
            <div className='flex w-full flex-col gap-[20px]'>
              <div className='flex justify-center'>
                <Badge>Tesla Owners UK Partners</Badge>
              </div>
              <h1 className='text-h1'>
                Become a partner <br />
                supplier
              </h1>
            </div>

            <div className='banner-image flex w-full'>
              <img
                src={page.staticPageHeader.banner.mediaItemUrl}
                alt={page.title}
                className='w-[100%] rounded-[8px]'
              />
            </div>
          </div>
        </div>
      </CommonLayout>
    </>
  )
}

export async function getStaticProps({ preview = false }) {
  const data = await getStaticPage('become-an-approved-partner')

  return {
    props: {
      preview,
      page: data.staticPage,
    },
    revalidate: 10,
  }
}

export default Page
